---
title: JavaScript进阶知识-05
date: 2017-07-10 17:13:34
categories:
 -  技术
---

##### JavaScript进阶知识-05

JavaScript进阶知识

<!--more-->

# 05-面向对象继承-笔记

## 一.高阶函数

### 1.1 函数作为函数参数【重要】

回调函数

- 参数

  - 形参：函数定义时，小括号中的标识符
  - 实参：函数调用时，小括号中实际的数据
  - 关系：实参代表的实际数据传递给函数内部的形参使用。
  - 应用场景：当外部向函数内部传入数据时。

- 现象：把一个函数B当做实参，传递给另一个函数的A的形参，并在函数A内部调用

- 代码：

  > ```javascript
  >  // 定义函数A
  >  // v是形参
  >  function A(v) {
  >    v(11,22);
  >  }
  >  // 调用
  >  A(
  >    function (a,b) {
  >      console.log(a + b);
  >    }
  >  );
  > ```
  >
  > 

  



### 1.2 函数作为函数的返回值【理解】

- 关键字：return 数据;

- 应用：函数内部要把结果暴露给外部时使用返回值

- 代码：

  > ```javascript
  >  // 【返回值是函数时】
  >  function fn() {
  >    return function(){
  >            console.log('我是内部的的函数');
  >           };
  >  }
  >  // 调用函数
  >  var r = fn();
  >  r();
  > 
  > ```

  

### 1.3 案例

1. 模拟动画完成后-对之前的动画封装升级



## 二.闭包【理解】

### 2.1 为什么要学习闭包

- 变量的生命周期：什么时候在内存中被释放
- 全局变量的生命周期：程序关闭。
- 局部变量的生命周期：函数执行结束后。
- 作用域：
  - 内层 可以 访问 外层，反之不行
  - 目的延长局部变量的生命周期
  - 使用闭包。
  - GC（Garbage Collection）垃圾回收机制
    - 回收没有用的数据。
    - 有用的数据：被全局中操作的变量。

### 2.2 什么是闭包

- MDN：闭包是函数和声明该函数的词法环境的组合。

- 百度百科：

  > ​	闭包就是能够读取其他函数内部变量的函数。例如在javascript中，只有函数内部的子函数才能读取[局部变量](https://baike.baidu.com/item/%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F/9844788)，所以闭包可以理解成“定义在一个[函数](https://baike.baidu.com/item/%E5%87%BD%E6%95%B0/301912)内部的函数“。在本质上，闭包是将函数内部和函数外部连接起来的==桥梁==。 

- 自己总结：

  - 闭包：桥梁（卧底）

  - 代码：

    > ```javascript
    >  // 生活：藏在别墅中的三儿，被外部的朝阳群众操作了。
    > 
    >  function bieShu () {
    >    var a = '三儿';  // 局部变量
    > 
    >    var guanJia = function() {
    >      console.log(a);  // 操作了外部的局部变量
    >    };
    > 
    >    return guanJia;   // 返回了子函数的地址
    > 
    > 
    >  }
    > 
    >  var cyqz = bieShu();  // 接收了子函数的地址
    >  cyqz();
    > ```
    >
    > 

    



### 2.3 闭包的作用

- 延长局部变量的生命周期
- 维护私有变量-局部变量的安全



### 2.4 如何检测一个程序是否存在闭包

 

​    // 如何检测一个程序中是否有闭包？

​    // 1. 外层函数  和  子函数

​    // 2. 外层函数必须有局部变量

​    // 3. 子函数要操作外层函数的局部变量

​    // 4. 让子函数和外部产生关联。 // 关联不一定是返回函数  // 事件



### 2.5 案例

1. 简单的银行管理操作（存钱、取钱、查钱）

2. 闭包经典案例，在页面上有一组元素（如按钮），点击哪个元素就显示哪个元素的索引

3. 看下列代码，说出最终执行结果，并解释是否存在闭包

   > ```javascript
   > var name = "The Window";
   > var object = {
   > name: "My Object",
   > getNameFunc: function () {
   >  return function () {  
   >    console.log(this.name)
   >  };
   > }
   > };
   > var fn = object.getNameFunc();
   > fn(); 
   > ```
   >
   > 

4. 看下列代码，说出最终执行结果，并解释是否存在闭包

   > ```javascript
   > var name = "The Window";　　
   > var object = {　　　　
   > name: "My Object",
   > getNameFunc: function () {
   >  var that = this;    
   >  return function () {
   >    console.log(that.name);
   >  };
   > }
   > };
   > var fn = object.getNameFunc();
   > fn();
   > ```
   >
   > 





## 三.递归【了解】

### 3.1 什么是递归

递归：函数调用自身的编程技巧。

- 官方概念

  > ​	**程序调用自身的编程技巧称为递归（ recursion）**。递归做为一种[算法](https://baike.baidu.com/item/%E7%AE%97%E6%B3%95)在[程序设计语言](https://baike.baidu.com/item/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80)中广泛应用。 一个过程或[函数](https://baike.baidu.com/item/%E5%87%BD%E6%95%B0)在其定义或说明中有直接或间接调用自身的一种方法，它通常把一个大型复杂的问题层层转化为一个与原问题相似的规模较小的问题来求解，递归策略只需少量的程序就可描述出解题过程所需要的多次重复计算，**大大地减少了程序的代码量** 。递归的能力在于用有限的[语句](https://baike.baidu.com/item/%E8%AF%AD%E5%8F%A5)来定义对象的[无限集合](https://baike.baidu.com/item/%E6%97%A0%E9%99%90%E9%9B%86%E5%90%88)。一般来说，递归需要有==**边界条件**== 、==**递归前进段**== 和==**递归返回段**== 。当边界条件不满足时，递归前进；当边界条件满足时，递归返回。

- 趣味理解递归

  > 天下有奇族人姓计，长生不老。一日其孙问其父：吾之18代祖名何？
  >
  > 其父不明，父问其父
  >
  > 其父不明，父问其父
  >
  > 其父不明，父问其父
  >
  > 其父不明，父问其父
  >
  > ...
  >
  > 晌后，其18代祖回其子：你猜 
  >
  > 然其回其子：你猜
  >
  > 然其回其子：你猜
  >
  > 然其回其子：你猜
  >
  > 然其回其子：你猜
  >
  > ...
  >
  > 终，计姓末代孙知其18代祖名“你猜”
  >
  > 

  

### 3.2 递归的三个阶段

- 递归前进段
- 递归边界条件
- 递归返回段

如：一组有规律的年龄10 、12、14、16、18、20、22、24......，求第n个人的年龄





### 3.3 递归的作用

​	减少代码量



### 3.4 案例

1. 一组有规律的年龄10 、12、14、16、18、20、22、24......，求第n个人的年龄
2. 一组有规律的数字1、1、2、3、5、8、13....，求第n个数字   



