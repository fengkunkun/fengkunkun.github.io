<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript-Nodejs-07 | Sumind&#39;s Blog</title>
    <meta name="description" content="做一个有灵魂的前端工程师">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.75dd9f78.css" as="style"><link rel="preload" href="/assets/js/app.a9f6d8ec.js" as="script"><link rel="preload" href="/assets/js/4.f605a52d.js" as="script"><link rel="preload" href="/assets/js/1.a2510d10.js" as="script"><link rel="preload" href="/assets/js/30.13388d66.js" as="script"><link rel="prefetch" href="/assets/js/10.96e33a09.js"><link rel="prefetch" href="/assets/js/11.ce91667a.js"><link rel="prefetch" href="/assets/js/12.3fed3056.js"><link rel="prefetch" href="/assets/js/13.41117cae.js"><link rel="prefetch" href="/assets/js/14.0a836303.js"><link rel="prefetch" href="/assets/js/15.c7a70042.js"><link rel="prefetch" href="/assets/js/16.eda894ef.js"><link rel="prefetch" href="/assets/js/17.9972567d.js"><link rel="prefetch" href="/assets/js/18.5c2087d9.js"><link rel="prefetch" href="/assets/js/19.9e5909ec.js"><link rel="prefetch" href="/assets/js/20.81cf4463.js"><link rel="prefetch" href="/assets/js/21.b1896877.js"><link rel="prefetch" href="/assets/js/22.3058e867.js"><link rel="prefetch" href="/assets/js/23.76b75888.js"><link rel="prefetch" href="/assets/js/24.cb2b6224.js"><link rel="prefetch" href="/assets/js/25.66f6d5cc.js"><link rel="prefetch" href="/assets/js/26.d3ba5339.js"><link rel="prefetch" href="/assets/js/27.1b1cd18a.js"><link rel="prefetch" href="/assets/js/28.d0ca9393.js"><link rel="prefetch" href="/assets/js/29.a10472bb.js"><link rel="prefetch" href="/assets/js/31.cd6ba917.js"><link rel="prefetch" href="/assets/js/32.097ed36d.js"><link rel="prefetch" href="/assets/js/33.e6ea0697.js"><link rel="prefetch" href="/assets/js/34.896ec5ef.js"><link rel="prefetch" href="/assets/js/35.9bd942f7.js"><link rel="prefetch" href="/assets/js/36.2b774afe.js"><link rel="prefetch" href="/assets/js/37.098262ce.js"><link rel="prefetch" href="/assets/js/38.6a5cbac5.js"><link rel="prefetch" href="/assets/js/39.03cc91d2.js"><link rel="prefetch" href="/assets/js/40.8d0a7377.js"><link rel="prefetch" href="/assets/js/41.dea6138e.js"><link rel="prefetch" href="/assets/js/42.555d373d.js"><link rel="prefetch" href="/assets/js/43.b47eb251.js"><link rel="prefetch" href="/assets/js/44.1ffd7b5b.js"><link rel="prefetch" href="/assets/js/45.cfb5da00.js"><link rel="prefetch" href="/assets/js/46.a56b9b85.js"><link rel="prefetch" href="/assets/js/47.4f781dff.js"><link rel="prefetch" href="/assets/js/48.4f542143.js"><link rel="prefetch" href="/assets/js/49.5c2eb801.js"><link rel="prefetch" href="/assets/js/5.e7fbaf2f.js"><link rel="prefetch" href="/assets/js/50.4fb88d7e.js"><link rel="prefetch" href="/assets/js/51.9028fef6.js"><link rel="prefetch" href="/assets/js/52.abb81def.js"><link rel="prefetch" href="/assets/js/6.896bf5be.js"><link rel="prefetch" href="/assets/js/7.b5260bec.js"><link rel="prefetch" href="/assets/js/8.5b3b73d8.js"><link rel="prefetch" href="/assets/js/9.eba5c3f6.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.2553b2f0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.75dd9f78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/01.jpg" alt="Sumind's Blog" class="logo"> <span class="site-name">Sumind's Blog</span></a> <div class="links"><div class="color-picker"><a href="#" class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">是否开启夜览模式？</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      Blog
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/技术.html" class="nav-link"><i class="iconfont undefined"></i>
  技术
</a></li><li class="dropdown-item"><!----> <a href="/category/总结.html" class="nav-link"><i class="iconfont undefined"></i>
  总结
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  生活
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont reco-account"></i>
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      Blog
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/技术.html" class="nav-link"><i class="iconfont undefined"></i>
  技术
</a></li><li class="dropdown-item"><!----> <a href="/category/总结.html" class="nav-link"><i class="iconfont undefined"></i>
  总结
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  生活
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont reco-account"></i>
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript-Nodejs-07</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_1、简介" class="sidebar-link">1、简介</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_2、配置" class="sidebar-link">2、配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_3、使用" class="sidebar-link">3、使用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_1-1-http协议的缺陷" class="sidebar-link">1.1 http协议的缺陷</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_1-2-什么是会话控制" class="sidebar-link">1.2 什么是会话控制</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_1-3-会话控制的分类" class="sidebar-link">1.3 会话控制的分类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_2-1-什么是cookie" class="sidebar-link">2.1 什么是cookie</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_2-2-设置cookie" class="sidebar-link">2.2 设置cookie</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_2-3-读取cookie" class="sidebar-link">2.3 读取cookie</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_2-4-cookie有效期" class="sidebar-link">2.4 cookie有效期</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_3-1-session介绍" class="sidebar-link">3.1 session介绍</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_3-2-设置-读取session" class="sidebar-link">3.2 设置/读取session</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_3-3-session有效期" class="sidebar-link">3.3 session有效期</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_3-4-删除session" class="sidebar-link">3.4 删除session</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/category1/2017/JavaScript-Nodejs-07.html#_3-5-session-的有效范围" class="sidebar-link">3.5 session 的有效范围</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>JavaScript-Nodejs-07</h1> <hr> <div data-v-0b496ca7><i class="iconfont reco-account" data-v-0b496ca7><span data-v-0b496ca7>Sumind</span></i> <i class="iconfont reco-date" data-v-0b496ca7><span data-v-0b496ca7>2017-7-31</span></i> <!----> <!----></div></div> <div class="content__default"><h5 id="javascript-nodejs-07"><a href="#javascript-nodejs-07" aria-hidden="true" class="header-anchor">#</a> JavaScript-Nodejs-07</h5> <p>JavaScript-Nodejs</p> <h1 id="multer第三方模块"><a href="#multer第三方模块" aria-hidden="true" class="header-anchor">#</a> multer第三方模块</h1> <h2 id="_1、简介"><a href="#_1、简介" aria-hidden="true" class="header-anchor">#</a> 1、简介</h2> <ul><li>multer 是基于express框架的一个实现文件上传功能的中间件。</li> <li>multer在GitHub仓库地址是：<a href="https://github.com/expressjs/multer" target="_blank" rel="noopener noreferrer">https://github.com/expressjs/multer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，里面有中文文档</li></ul> <h2 id="_2、配置"><a href="#_2、配置" aria-hidden="true" class="header-anchor">#</a> 2、配置</h2> <p>使用multer，主要用于文件上传。那么文件上传到哪里？保存到哪里？上传后的文件名是否需要重命名等等问题，都可以通过multer来进行配置。</p> <p>下面介绍一种非常简单的配置，一般网站使用此配置即可。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 加载模块</span>
<span class="token keyword">const</span> multer  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'multer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 配置</span>
<span class="token comment">/*
1. 调用multer函数，需要给他传递一个对象，来对上传的文件进行配置
2. dest：表示目标，在这里表示文件上传的保存位置。下面设置上传的文件保存在当前文件夹的myup子文件夹中
3. 设置dest为一个目录后，如果该目录不存在，还可以自行创建该文件夹。
4. 得到的myupload是一个对象，该对象的几个方法都可以当做中间件，可以在添加或注册的时候使用
*/</span>
<span class="token keyword">const</span> myupload <span class="token operator">=</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  dest<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/myup'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>如果需要更加复杂的配置，则看下面的代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 加载模块</span>
<span class="token keyword">const</span> multer  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'multer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 配置</span>
<span class="token comment">/*
1. 仍然是调用multer函数，给它传递一个对象进行配置
2. storage：文件的存储引擎，multer内置了磁盘存储(DiskStorage)和内存存储(MemoryStorage)
3. 下面使用的是diskStorage磁盘存储引擎，及它的配置
4. destination表示上传文件的存储路径，可以是一个函数，也可以是一个字符串
   如果用函数设置此项，函数的三个形参，分别表示请求的req对象、表示上传文件的file对象和一个回调函数
   无论使用函数还是字符串设置destination，都不会自动创建文件夹
5. filename 用于确定文件夹中的文件名的确定。 如果没有设置 filename，每个文件将设置为一个随机文件    名，并且是没有扩展名的。
6. 下面配置中，回调函数中的file形参表示上传的文件对象，对象的属性见后面的表
*/</span>
<span class="token keyword">const</span> myupload <span class="token operator">=</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  storage<span class="token punctuation">:</span> multer<span class="token punctuation">.</span><span class="token function">diskStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">destination</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// cb是回调函数，用它设置上传路径，null的位置可以写成err，用于获取错误，使用null表示不获取错误</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> __dirname <span class="token operator">+</span> <span class="token string">'/abcd'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// destination: __dirname + '/cdef',</span>
    <span class="token function-variable function">filename</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span>fieldname <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>上面配置 destination和filename函数的file参数表示上传的文件对象，该对象具有以下属性：</p> <table><thead><tr><th>Key</th> <th>Description</th></tr></thead> <tbody><tr><td><code>fieldname</code></td> <td>Field name 由表单指定</td></tr> <tr><td><code>originalname</code></td> <td>用户计算机上的文件的名称</td></tr> <tr><td><code>encoding</code></td> <td>文件编码</td></tr> <tr><td><code>mimetype</code></td> <td>文件的 MIME 类型</td></tr> <tr><td><code>size</code></td> <td>文件大小（字节单位）</td></tr> <tr><td><code>destination</code></td> <td>保存路径</td></tr> <tr><td><code>filename</code></td> <td>保存在 <code>destination</code> 中的文件名</td></tr> <tr><td><code>path</code></td> <td>已上传文件的完整路径</td></tr></tbody></table> <h2 id="_3、使用"><a href="#_3、使用" aria-hidden="true" class="header-anchor">#</a> 3、使用</h2> <p>在有文件上传的请求处理中，使用中间件即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/////////////////////////////// 1. 单文件上传 ////////////////////////</span>
<span class="token comment">// 单文件上传使用方式（形如：&lt;input type=&quot;file&quot; name=&quot;pic&quot; /&gt;）</span>
<span class="token comment">/*
在下面的 /abc 接口中，使用myupload.single() 方法作为该接口的中间件
myupload.single() 的参数 pic 为 表单项的name值
因为是单文件上传，所以在函数内部可以通过req.file 来获取上传的文件对象
*/</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/abc'</span><span class="token punctuation">,</span> myupload<span class="token punctuation">.</span><span class="token function">single</span><span class="token punctuation">(</span><span class="token string">'pic'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 上传的文件对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 表单的文本信息</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'文件上传成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/////////////////////////////// 2. 多文件上传 ////////////////////////</span>
<span class="token comment">// 一个可以多文件上传的文件域（形如：&lt;input type=&quot;file&quot; multiple name=&quot;pic&quot; /&gt;）</span>
<span class="token comment">/*
在下面的 /abc 接口中，使用myupload.array() 方法作为该接口的中间件
myupload.array() 的参数 pic 为 表单项的name值， 2 表示允许上传的文件个数不能超过2个
因为是多文件上传，所以在函数内部可以通过req.files 来获取上传的文件对象
*/</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/abc'</span><span class="token punctuation">,</span> myupload<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token string">'pic'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'文件上传成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/////////////////////////////// 3. 多个文件域 ////////////////////////</span>
<span class="token comment">// 有多个文件域 (形如：&lt;input type=&quot;file&quot; multiple name=&quot;pic1&quot; /&gt;&lt;input type=&quot;file&quot; multiple name=&quot;pic2&quot; /&gt;)</span>
<span class="token comment">/*
在下面的 /abc 接口中，使用myupload.fields() 方法作为该接口的中间件
myupload.fields() 的参数 为一个数组，数组中的每个单元对应着一个文件域，name为文件域name属性值，maxCount表示该文件域可以选择的文件个数最大值
因为是多文件上传，所以在函数内部可以通过req.files 来获取上传的文件对象
*/</span>
<span class="token keyword">let</span> up <span class="token operator">=</span> upload<span class="token punctuation">.</span><span class="token function">fields</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'pic1'</span><span class="token punctuation">,</span> maxCount<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'pic2'</span><span class="token punctuation">,</span> maxCount<span class="token punctuation">:</span> <span class="token number">8</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/abc'</span><span class="token punctuation">,</span> up<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'文件上传成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h1 id="_1-会话技术概况"><a href="#_1-会话技术概况" aria-hidden="true" class="header-anchor">#</a> 1. 会话技术概况</h1> <h2 id="_1-1-http协议的缺陷"><a href="#_1-1-http协议的缺陷" aria-hidden="true" class="header-anchor">#</a> 1.1 http协议的缺陷</h2> <p>http是无状态的，就是无记忆，不能让同一浏览器和服务器进行多次数据交换时，产生业务的连续性。</p> <p>目前，每次请求都是独立的，没有关系的。所以服务器和客户端都不知道是否是登录过的。</p> <h2 id="_1-2-什么是会话控制"><a href="#_1-2-什么是会话控制" aria-hidden="true" class="header-anchor">#</a> 1.2 什么是会话控制</h2> <p>会话控制就是弥补http无记忆的缺陷的。能够将数据持久化的保存在客户端(浏览器)或者服务器端，从而让浏览器和服务器进行多次数据交换时，产生连续性。</p> <h2 id="_1-3-会话控制的分类"><a href="#_1-3-会话控制的分类" aria-hidden="true" class="header-anchor">#</a> 1.3 会话控制的分类</h2> <ul><li>cookie： 将数据持久化保存到<strong>客户端</strong>（浏览器）</li> <li>session： 将数据持久化保存到<strong>服务器端</strong></li></ul> <h1 id="_2-cookie技术"><a href="#_2-cookie技术" aria-hidden="true" class="header-anchor">#</a> 2. cookie技术</h1> <h2 id="_2-1-什么是cookie"><a href="#_2-1-什么是cookie" aria-hidden="true" class="header-anchor">#</a> 2.1 什么是cookie</h2> <ul><li>cookie是将数据持久化存储到客户端的一种技术。</li> <li>网站可以将数据写到浏览器中， 一个网站最多能在一个浏览器写20个cookie。现在的浏览器能写的更多</li> <li>一个浏览器能够设置的总cookie数最多为300个，每个不能超过4kb。</li> <li>cookie既能保存在文件中，也能保存在内存中。</li> <li>可以通过浏览器查看某个网站的cookie</li></ul> <h2 id="_2-2-设置cookie"><a href="#_2-2-设置cookie" aria-hidden="true" class="header-anchor">#</a> 2.2 设置cookie</h2> <ul><li>核心： cookie是服务端设置的，随着响应头返回给浏览器的信息，浏览器要将这些信息记录下来</li> <li>如何设置cookie
<ul><li>使用 res.setHeader</li> <li>使用res.writeHead</li> <li>如果使用的是express框架，可以使用res.set()方法</li></ul></li> <li>cookie设置格式：<code>key=value;expires=time</code> <ul><li>key: cookie的名称</li> <li>value： 名称对应的值</li> <li>expires： 有效期</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 所有的设置cookie，都必须写到一个请求中</span>

<span class="token comment">//1. 使用 http模块中的setHeader 方法，它可以和sendFile一起使用</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'set-cookie'</span><span class="token punctuation">,</span> <span class="token string">'id=101'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//设置单个cookie</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'set-cookie'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id=101'</span><span class="token punctuation">,</span> <span class="token string">'name=zs'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//设置多个cookie</span>

<span class="token comment">//2. 使用 http模块中的writeHead 方法，它不能和sendFile及send一起使用</span>
res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">,</span>
    <span class="token string">'set-cookie'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'type=10'</span><span class="token punctuation">,</span> <span class="token string">'name=my'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>；

<span class="token comment">//3. 使用 express模块中的set 方法，该方法是express封装的方法，它可以和sendFile一起使用</span>
res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'set-cookie'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'goodsName=xiaomi 6'</span><span class="token punctuation">,</span> <span class="token string">'goodsPrice=3999'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>；

<span class="token comment">//4. 设置cookie时，指定有效期</span>
<span class="token comment">//注意：要使用UTC时间，使用 toUTCString()方法转换</span>
<span class="token comment">//设置有效期为 1小时</span>
<span class="token keyword">const</span> expiresTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3600000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'set-cookie'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'goodsName=xiaomi 6;expires='</span> <span class="token operator">+</span> expiresTime<span class="token punctuation">,</span> <span class="token string">'goodsPrice=3999'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="_2-3-读取cookie"><a href="#_2-3-读取cookie" aria-hidden="true" class="header-anchor">#</a> 2.3 读取cookie</h2> <p>一旦网站在浏览器设置好cookie之后，浏览器<strong>再访</strong>问网站（任何页面）时，浏览器会将cookie信息随着请求头一起发送给服务器。所以我们在服务器端通过 <code>req.headers.cookie</code> 可以获取到cookie的信息。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 监视浏览器的请求</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/get'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里获取cookie</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'你又来了，我上次给你的cookie你带来了吗'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里获取cookie</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'你又来了，我上次给你的cookie你带来了吗'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里获取cookie</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'你又来了，我上次给你的cookie你带来了吗'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_2-4-cookie有效期"><a href="#_2-4-cookie有效期" aria-hidden="true" class="header-anchor">#</a> 2.4 cookie有效期</h2> <ul><li>默认情况是，当关闭浏览器，cookie即消失</li> <li>如果设置了cookie的有效期（expires），则cookie会在指定的有效期内一直存在，无论浏览器是否关闭</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 设置cookie的有效期为1小时</span>
<span class="token comment">// 方式: 先找到一小时之后的时间戳，再转为utc时间</span>
<span class="token comment">// Date.now()： 获取当前时间点的时间戳 （毫秒数）</span>
<span class="token comment">// Date.now() + 3600000： 一小时之后的毫秒数</span>
<span class="token comment">// new Date(Date.now() + 3600000).toUTCString(): 将时间戳转为时间格式（UTC时间格式）</span>
<span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3600000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置cookie，有效期为1个小时</span>
res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'set-cookie'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'name=zs;expires='</span><span class="token operator">+</span>time<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h1 id="_3-session技术"><a href="#_3-session技术" aria-hidden="true" class="header-anchor">#</a> 3. session技术</h1> <h2 id="_3-1-session介绍"><a href="#_3-1-session介绍" aria-hidden="true" class="header-anchor">#</a> 3.1 session介绍</h2> <ul><li>因为cookie是保存在客户端的数据，不够安全，所以出现了session。</li> <li>session会将数据保存到服务器端（保存在文件、内存服务器或数据表中），安全性就可以得到保证。</li></ul> <h2 id="_3-2-设置-读取session"><a href="#_3-2-设置-读取session" aria-hidden="true" class="header-anchor">#</a> 3.2 设置/读取session</h2> <p>express设置session时，需要使用第三方模块 --- express-session</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i express-session
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用步骤：</p> <ol><li><p>加载 express-session 模块</p></li> <li><p>将session注册为中间件（这样，当有请求过来的时候，都会先经过中间件）</p></li> <li><p>使用 <code>req.session</code> 对象设置/读取session</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//1. 加载 express-session 模块</span>
<span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-session'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 配置项</span>
<span class="token keyword">let</span> conf <span class="token operator">=</span> <span class="token punctuation">{</span>
    secret<span class="token punctuation">:</span> <span class="token string">'4ey32erfyf3fgpg'</span><span class="token punctuation">,</span>   <span class="token comment">//加密字符串。 使用该字符串来加密session数据，自定义</span>
    resave<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>               <span class="token comment">//强制保存session即使它并没有变化</span>
    saveUninitialized<span class="token punctuation">:</span> <span class="token boolean">false</span>     <span class="token comment">//强制将未初始化的session存储。当新建了一个session且未</span>
    							 <span class="token comment">//设定属性或值时，它就处于未初始化状态。</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//3. 注册为express-session中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span>conf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4. 在一个测试请求中，设置session </span>
<span class="token comment">// 方法：  req.session.属性 = 值</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/sets'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// session的值可以是任何的数据类型，比如布尔，数组，对象等</span>
    req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>isLogin <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> <span class="token punctuation">{</span>user_id<span class="token punctuation">:</span><span class="token number">10001</span><span class="token punctuation">,</span> user_name<span class="token punctuation">:</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//注意：一定要将数据发回给浏览器，否则session无法生效</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'设置session'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//设置好之后，req.session中的结构如下，当再次向服务器上任何页面或接口发请求时，我们可以获取到刚刚设置的session值</span>
<span class="token comment">// req.session = {</span>
<span class="token comment">//    isLogin: true,</span>
<span class="token comment">//    userInfo: {user_id:10001, user_name:&quot;zs&quot;}</span>
<span class="token comment">//}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_3-3-session有效期"><a href="#_3-3-session有效期" aria-hidden="true" class="header-anchor">#</a> 3.3 session有效期</h2> <ul><li>当服务器关闭后，session消失</li> <li>express-session会将session保存在内存中，每次重启服务器时即使没有关闭浏览器session也会消失</li></ul> <blockquote><p>学习阶段都是开发环境，服务器一会关闭了，一会开启了。</p> <p>开发环境中，session是保存在内存中的，所以关闭服务器，session就消失了</p> <p>生产环境中session的有效期要设置在配置项中，<code>cookie: {maxAge: 3600000}</code>，session应该保存到内存服务器中</p></blockquote> <h2 id="_3-4-删除session"><a href="#_3-4-删除session" aria-hidden="true" class="header-anchor">#</a> 3.4 删除session</h2> <p>核心： req.session.destroy()    销毁所有session</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 删除所有session</span>
req<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_3-5-session-的有效范围"><a href="#_3-5-session-的有效范围" aria-hidden="true" class="header-anchor">#</a> 3.5 session 的有效范围</h2> <p>在一个网站中设置了session，则整个网站都能找到这个session</p> <h1 id="_4-cookie、session原理"><a href="#_4-cookie、session原理" aria-hidden="true" class="header-anchor">#</a> 4. cookie、session原理</h1> <p>cookie原理：</p> <p>session原理：</p> <p>服务器端会为每个用户（浏览器）各自保存一个session（文件）</p> <p>下次用户再来访问的时候，就不能确定该用户的session是哪一个了</p> <p>所以当服务器保存session之后，会以cookie的形式告诉浏览器，你的session是哪一个</p> <p>下次再来访问服务器的时候，浏览器就会带着它自己的session号去访问，服务器就可以找到对应的session了</p> <h1 id="_5、cookie和session的优缺点"><a href="#_5、cookie和session的优缺点" aria-hidden="true" class="header-anchor">#</a> 5、cookie和session的优缺点</h1> <p>cookie：优点是节省服务器空间，缺点不安全。</p> <p>session：优点是安全，缺点需要服务器空间。</p></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/18/2019, 2:26:44 AM</span></div></footer> <!----> </main> <div class="valine-wrapper" data-v-0162251c><div id="valine" data-v-0162251c></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-d0bfeaa4 data-v-d0bfeaa4><i class="iconfont reco-up" data-v-d0bfeaa4></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a9f6d8ec.js" defer></script><script src="/assets/js/4.f605a52d.js" defer></script><script src="/assets/js/1.a2510d10.js" defer></script><script src="/assets/js/30.13388d66.js" defer></script>
  </body>
</html>
